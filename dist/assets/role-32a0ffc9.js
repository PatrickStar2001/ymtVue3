import{aj as p,_ as R,d as T,o as C,c as E,a as f,b as l,w as t,F as y,E as m,e as U,f as k,g as W,h as r,i as D,j as L,k as N,l as z}from"./index-cc83c9fb.js";import{E as $}from"./el-pagination-4a604fda.js";import{c as B}from"./cloneDeep-d03ca120.js";import{E as P}from"./index-7b55315a.js";const v=e=>p.request({url:"/api/role/add",method:"POST",data:e}),S=e=>p.request({url:"/api/role/delete",method:"GET",params:e}),q=e=>p.request({url:"/api/role/edit",method:"POST",data:e}),F=e=>p.request({url:"api/role/all",method:"get",data:e}),A=T({data(){return{Roles:[],pageinfo:{currentPage:1,pageSize:5,totalpage:10},Role:{createTime:"",deleted:0,description:"",id:0,roleName:"",status:0,updateTime:""},DialogVisible:!1,EditDialogVisible:!1}},mounted(){this.getdormitorys()},methods:{pageChange(e){this.pageinfo.currentPage=e,this.getdormitorys()},getdormitorys(){let e=this.pageinfo.pageSize*(this.pageinfo.currentPage-1),o=this.pageinfo.currentPage*this.pageinfo.pageSize;F().then(d=>{if(d.success)this.pageinfo.totalpage=d.data.roles.length,this.Roles=d.data.roles.slice(e,o),m(d.msg);else return m(d.msg),!1;console.log(d)}).catch(d=>{console.log(d)})},add(){this.DialogVisible=!0},confirmAdd(){const e=this.Role;v(e).then(o=>{this.getdormitorys()}).catch(o=>{console.log(o)}),this.DialogVisible=!1},edit(e){this.EditDialogVisible=!0,this.Role=B(e)},confirmEdit(){let e=this.Role;console.log(e),q(e).then(o=>{if(o.success)this.EditDialogVisible=!1,this.getdormitorys(),m(o.msg);else return m(o.msg),!1}).catch(o=>{m("网络错误联系管理员")})},del(e){console.log(e);const o={id:e};P.confirm("是否确认删除","Warning",{confirmButtonText:"确认删除",cancelButtonText:"再考虑一下",type:"warning"}).then(()=>{m({type:"success",message:"删除成功"}),S(o).then(d=>{if(d.success)this.getdormitorys();else return console.log(d.msg),!1}).catch(d=>{console.log(d)})}).catch(()=>{m({type:"info",message:"再考虑一下"})})}}}),O={class:"dialog-footer"},j={class:"dialog-footer"};function I(e,o,d,M,G,H){const u=U,s=D,V=k,h=$,i=L,n=N,b=z,g=W;return C(),E(y,null,[f("div",null,[l(u,{type:"primary",round:"",onClick:e.add},{default:t(()=>[r("添加")]),_:1},8,["onClick"]),l(V,{data:e.Roles,style:{width:"100%"}},{default:t(()=>[l(s,{fixed:"",prop:"id",label:"id",width:"150"}),l(s,{prop:"deleted",label:"deleted",width:"120"}),l(s,{prop:"description",label:"description",width:"120"}),l(s,{prop:"createTime",label:"createTime",width:"120"}),l(s,{prop:"roleName",label:"roleName",width:"120"}),l(s,{prop:"status",label:"status",width:"120"}),l(s,{prop:"updateTime",label:"updateTime",width:"120"}),l(s,{fixed:"right",label:"Operations",width:"240"},{default:t(a=>[l(u,{type:"primary",round:"",size:"small",onClick:w=>e.edit(a.row)},{default:t(()=>[r("修改")]),_:2},1032,["onClick"]),l(u,{type:"danger",round:"",size:"small",onClick:w=>e.del(a.row.id)},{default:t(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(h,{layout:"prev, pager, next",total:e.pageinfo.totalpage,"page-size":e.pageinfo.pageSize,onCurrentChange:e.pageChange},null,8,["total","page-size","onCurrentChange"])]),l(g,{modelValue:e.DialogVisible,"onUpdate:modelValue":o[8]||(o[8]=a=>e.DialogVisible=a),title:"添加",width:"50%",center:""},{footer:t(()=>[f("span",O,[l(u,{onClick:o[7]||(o[7]=a=>e.DialogVisible=!1)},{default:t(()=>[r("取消")]),_:1}),l(u,{type:"primary",onClick:e.confirmAdd},{default:t(()=>[r(" 确认 ")]),_:1},8,["onClick"])])]),default:t(()=>[l(b,{model:e.Role},{default:t(()=>[l(n,{label:"id","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.id,"onUpdate:modelValue":o[0]||(o[0]=a=>e.Role.id=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"deleted","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.deleted,"onUpdate:modelValue":o[1]||(o[1]=a=>e.Role.deleted=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"description","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.description,"onUpdate:modelValue":o[2]||(o[2]=a=>e.Role.description=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"createTime","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.createTime,"onUpdate:modelValue":o[3]||(o[3]=a=>e.Role.createTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"roleName","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.roleName,"onUpdate:modelValue":o[4]||(o[4]=a=>e.Role.roleName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"status","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.status,"onUpdate:modelValue":o[5]||(o[5]=a=>e.Role.status=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"updateTime","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.updateTime,"onUpdate:modelValue":o[6]||(o[6]=a=>e.Role.updateTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(g,{modelValue:e.EditDialogVisible,"onUpdate:modelValue":o[17]||(o[17]=a=>e.EditDialogVisible=a),title:"修改",width:"50%",center:""},{footer:t(()=>[f("span",j,[l(u,{onClick:o[16]||(o[16]=a=>e.EditDialogVisible=!1)},{default:t(()=>[r("Cancel")]),_:1}),l(u,{type:"primary",onClick:e.confirmEdit},{default:t(()=>[r(" Confirm ")]),_:1},8,["onClick"])])]),default:t(()=>[l(b,{model:e.Role},{default:t(()=>[l(n,{label:"id","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.id,"onUpdate:modelValue":o[9]||(o[9]=a=>e.Role.id=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"deleted","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.deleted,"onUpdate:modelValue":o[10]||(o[10]=a=>e.Role.deleted=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"description","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.description,"onUpdate:modelValue":o[11]||(o[11]=a=>e.Role.description=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"createTime","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.createTime,"onUpdate:modelValue":o[12]||(o[12]=a=>e.Role.createTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"roleName","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.roleName,"onUpdate:modelValue":o[13]||(o[13]=a=>e.Role.roleName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"status","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.status,"onUpdate:modelValue":o[14]||(o[14]=a=>e.Role.status=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"updateTime","label-width":e.formLabelWidth},{default:t(()=>[l(i,{modelValue:e.Role.updateTime,"onUpdate:modelValue":o[15]||(o[15]=a=>e.Role.updateTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=R(A,[["render",I]]);export{Y as default};
