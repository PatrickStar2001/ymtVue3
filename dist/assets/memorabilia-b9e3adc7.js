import{aj as b,_ as w,d as C,o as E,c as k,a as u,b as a,w as t,F as v,E as n,e as I,f as F,g as P,h as d,aq as z,ar as M,j as $,i as D,k as L,l as U}from"./index-cc83c9fb.js";import{E as W}from"./el-date-picker-3136c438.js";import{E as q}from"./el-pagination-4a604fda.js";import{c as A}from"./cloneDeep-d03ca120.js";import"./dayjs.min-dcbe53ea.js";const B=e=>b.request({url:"api/memorabilia/add",method:"post",data:e}),N=e=>b.request({url:"api/memorabilia/delete",params:e}),S=e=>b.request({url:"api/memorabilia/edit",method:"post",data:e}),j=e=>b.request({url:"api/memorabilia/page",method:"post",data:e});const G=C({data(){return{memorabilias:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,memorabilia:{content:"",createTime:"",happenTime:"",id:0,updateTime:"",userId:0},formLabelWidth:80}},mounted(){this.getMemorabiliasPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.memorabilia=A(e)},getMemorabiliasPage(e){j({current:e,size:10}).then(o=>{console.log(o);const g=o.data.page;this.memorabilias=g.records;for(var s=0;s<this.memorabilias.length;s++)this.memorabilias[s].createTime=this.memorabilias[s].createTime.substring(0,10),this.memorabilias[s].happenTime=this.memorabilias[s].happenTime.substring(0,10),this.memorabilias[s].updateTime=this.memorabilias[s].updateTime.substring(0,10);this.page=g}).catch(o=>{console.log(o)})},currentchange(e){this.getMemorabiliasPage(e),this.page.current=e},del(e){console.log(e),N({id:e}).then(o=>{if(o.success)this.getMemorabiliasPage(this.page.current),this.page.total%this.page.size==1?this.getAdCatesPage(this.page.current-1):this.getAdCatesPage(this.page.current);else return console.log(o.msg),!1}).catch(o=>{})},toAdd(){this.dialogFormVisible=!0,this.memorabilia={content:"",createTime:"",happenTime:"",id:0,updateTime:"",userId:0}},save(){const e=this.memorabilia;e.id==0?B(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getMemorabiliasPage(this.page.current),n(l.msg);else return n(l.msg),!1}).catch(l=>{n("网络错误联系管理员")}):S(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getMemorabiliasPage(this.page.current),n(l.msg);else return n(l.msg),!1}).catch(l=>{n("网络错误联系管理员")})}}}),H=e=>(z("data-v-68e37c01"),e=e(),M(),e),J={class:"memorabilias"},K=H(()=>u("p",{style:{"text-align":"center","font-size":"20px","font-weight":"600",color:"rgb(111, 105, 105)","margin-top":"-30px"}},"大事件发生",-1)),O={class:"community-tools"},Q={class:"dialog-footer"};function R(e,l,o,g,s,X){const h=$,m=I,r=D,f=F,_=q,p=L,c=W,V=U,T=P;return E(),k(v,null,[u("div",J,[K,u("div",O,[a(h,{style:{float:"right",width:"200px","margin-right":"10px"}}),a(m,{type:"primary",style:{float:"right","margin-right":"20px"}},{default:t(()=>[d("搜索")]),_:1}),a(m,{type:"primary",onClick:e.toAdd},{default:t(()=>[d("添加")]),_:1},8,["onClick"])]),a(f,{data:e.memorabilias,style:{width:"100%"}},{default:t(()=>[a(r,{fixed:"",prop:"id",label:"",width:"50"}),a(r,{prop:"content",label:"事件内容"}),a(r,{prop:"createTime",label:"创建时间"}),a(r,{prop:"happenTime",label:"发生时间"}),a(r,{prop:"updateTime",label:"修改时间"}),a(r,{prop:"userId",label:"用户ID"}),a(r,{fixed:"right",label:"操作",width:"120"},{default:t(i=>[a(m,{link:"",type:"primary",size:"small",onClick:y=>e.toEdit(i.row)},{default:t(()=>[d("更新")]),_:2},1032,["onClick"]),a(m,{link:"",type:"primary",size:"small",onClick:y=>e.del(i.row.id)},{default:t(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(_,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange,style:{position:"absolute",left:"800px",top:"630px"}},null,8,["page-size","total","onCurrentChange"])]),a(T,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[6]||(l[6]=i=>e.dialogFormVisible=i),title:"大事件发生"},{footer:t(()=>[u("span",Q,[a(m,{onClick:l[5]||(l[5]=i=>e.dialogFormVisible=!1)},{default:t(()=>[d("Cancel")]),_:1}),a(m,{type:"primary",onClick:e.save},{default:t(()=>[d(" 保存 ")]),_:1},8,["onClick"])])]),default:t(()=>[a(V,{model:e.memorabilia},{default:t(()=>[a(p,{label:"事件内容","label-width":e.formLabelWidth},{default:t(()=>[a(h,{modelValue:e.memorabilia.content,"onUpdate:modelValue":l[0]||(l[0]=i=>e.memorabilia.content=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(p,{label:"创建时间","label-width":e.formLabelWidth},{default:t(()=>[a(c,{modelValue:e.memorabilia.createTime,"onUpdate:modelValue":l[1]||(l[1]=i=>e.memorabilia.createTime=i),type:"date",placeholder:"选择日期"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(p,{label:"发生时间","label-width":e.formLabelWidth},{default:t(()=>[a(c,{modelValue:e.memorabilia.happenTime,"onUpdate:modelValue":l[2]||(l[2]=i=>e.memorabilia.happenTime=i),type:"date",placeholder:"选择日期"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(p,{label:"修改时间","label-width":e.formLabelWidth},{default:t(()=>[a(c,{modelValue:e.memorabilia.updateTime,"onUpdate:modelValue":l[3]||(l[3]=i=>e.memorabilia.updateTime=i),type:"date",placeholder:"选择日期"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(p,{label:"用户ID","label-width":e.formLabelWidth},{default:t(()=>[a(h,{modelValue:e.memorabilia.userId,"onUpdate:modelValue":l[4]||(l[4]=i=>e.memorabilia.userId=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const le=w(G,[["render",R],["__scopeId","data-v-68e37c01"]]);export{le as default};
