import{_ as B,E as s,ao as g,o as f,c as N,a as P,b as e,w as a,ap as U,F as w,e as z,j as F,f as A,g as G,K as _,h as y,Q as K,i as R,k as M,l as j}from"./index-cc83c9fb.js";import{E as O}from"./el-pagination-4a604fda.js";import{E as x}from"./index-7b55315a.js";const Q={created(){this.GetAll()},computed:{paginatedData(){const l=(this.currentPage-1)*this.pageSize,t=l+this.pageSize;return this.filteredPatentList.slice(l,t)},filteredPatentList(){return this.searchText&&this.patList?this.patList.filter(l=>l.id==this.searchText):this.patList}},data(){return{editedPat:{},editDialogVisible:!1,currentPage:1,pageSize:5,searchText:"",patList:[]}},methods:{handlePageChange(l){this.currentPage=l},clearSearch(){this.searchText=""},Cancel(){this.editDialogVisible=!1,s.info("保存取消！")},Getone(l){this.patList=[],pat.getOneData(l).then(t=>{console.log("搜索成功！"),s.success("搜索成功！");const r=t.data.patent;this.patList.push(r)}).catch(t=>{s.error("搜索失败！"),console.log("搜索失败！")})},Save(){console.log("Saving Pat:",this.editedPat);const l=this.patList.findIndex(t=>t.id===this.editedPat.id);l!==-1?this.patList.splice(l,1,this.editedPat):this.patList.push(this.editedPat),this.editDialogVisible=!1,s.success("保存成功！")},openEditDialog(l){this.editedPat={...l},this.editDialogVisible=!0},editPat(l){console.log("编辑 Pat",l)},deletePat(l){x.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{pat.delData(l.id).then(t=>{if(t.success){const r=this.patList.findIndex(V=>V.id===l.id);r!==-1&&this.patList.splice(r,1),console.log("删除成功"),s.success("删除成功！")}else s.error(t.msg),console.error(t.msg)}).catch(t=>{console.error(t)}),console.log("删除 Pat")}).catch(t=>{console.log("不删除 Pat",t)})},deleteData(l){x.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=this.patList.findIndex(r=>r.id===l.id);t!==-1&&this.patList.splice(t,1),s.success("删除成功！")}).catch(()=>{s.error("删除失败！"),console.log("取消删除 Pat",l)})},addPat(){s.success("添加数据ing");const l={id:0,name:"",uesrId:0,type:"",empowerTime:"",attachment:"",address:"",patentNo:""};this.patList.push(l)},async GetAll(){try{this.clearSearch();const l={colums:[],current:1,size:99},t=await pat.getPageData(l);if(t.success){console.log(t.data);const r=t.data.page.records;this.patList=r,s.success("刷新成功！")}else s.error("请求失败！"),console.error(t.msg)}catch(l){console.error(l)}},Insert(l){pat.addData(l).then(t=>{delete l.isNew,s.success("添加成功！"),console.log("添加成功！")}).catch(t=>{s.error("添加失败！"),console.log("添加失败！")})},Alter(l){pat.editData(l).then(t=>{console.log("修改成功！"),s.success("修改成功！")}).catch(t=>{console.log("修改失败！"),s.error("修改失败！")})}}},q={class:"dialog-footer"};function H(l,t,r,V,o,i){const k=g("Search"),p=K,d=z,c=F,u=R,b=g("Position"),D=g("EditPen"),C=g("Delete"),E=A,L=O,T=g("CirclePlusFilled"),I=g("RefreshRight"),m=M,S=j,v=G;return f(),N(w,null,[P("div",null,[e(c,{modelValue:o.searchText,"onUpdate:modelValue":t[1]||(t[1]=n=>o.searchText=n),placeholder:"请输入搜索关键字",clearable:"",onClear:i.clearSearch,onKeyup:U(l.performSearch,["enter"]),style:{"margin-bottom":"20px"}},{append:a(()=>[e(d,{circle:"",type:"danger",onClick:t[0]||(t[0]=n=>i.Getone(this.searchText))},{default:a(()=>[e(p,null,{default:a(()=>[e(k)]),_:1})]),_:1})]),_:1},8,["modelValue","onClear","onKeyup"])]),P("div",null,[e(E,{data:i.paginatedData,style:{width:"100%"}},{default:a(()=>[e(u,{prop:"id",label:"编号"}),e(u,{prop:"name",label:"专利名称"}),e(u,{prop:"userId",label:"发明人"}),e(u,{prop:"type",label:"专利类型"}),e(u,{prop:"empowerTime",label:"授权时间"}),e(u,{prop:"attachment",label:"佐证材料"}),e(u,{prop:"address",label:"地址"}),e(u,{prop:"patentNo",label:"专利号"}),e(u,{label:"操作"},{default:a(({row:n})=>[n.isNew?(f(),_(d,{key:0,class:"custom-button",type:"success",circle:"",onClick:h=>i.Insert(n)},{default:a(()=>[e(p,null,{default:a(()=>[e(b)]),_:1})]),_:2},1032,["onClick"])):(f(),_(d,{key:1,class:"custom-button",type:"warning",circle:"",onClick:h=>i.Alter(n)},{default:a(()=>[e(p,null,{default:a(()=>[e(b)]),_:1})]),_:2},1032,["onClick"])),e(d,{type:"primary",circle:"",onClick:h=>i.openEditDialog(n)},{default:a(()=>[e(p,null,{default:a(()=>[e(D)]),_:1})]),_:2},1032,["onClick"]),n.isNew?(f(),_(d,{key:2,type:"danger",circle:"",onClick:h=>i.deleteData(n)},{default:a(()=>[e(p,null,{default:a(()=>[e(C)]),_:1})]),_:2},1032,["onClick"])):(f(),_(d,{key:3,type:"danger",circle:"",onClick:h=>i.deletePat(n)},{default:a(()=>[e(p,null,{default:a(()=>[e(C)]),_:1})]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"]),e(L,{"current-page":o.currentPage,"page-size":o.pageSize,total:i.filteredPatentList.length,onCurrentChange:i.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"]),e(d,{type:"primary",circle:"",onClick:i.addPat,style:{"margin-top":"10px"}},{default:a(()=>[e(p,null,{default:a(()=>[e(T)]),_:1})]),_:1},8,["onClick"]),e(d,{type:"primary",circle:"",onClick:i.GetAll,style:{"margin-top":"10px"}},{default:a(()=>[e(p,null,{default:a(()=>[e(I)]),_:1})]),_:1},8,["onClick"]),e(v,{modelValue:o.editDialogVisible,"onUpdate:modelValue":t[10]||(t[10]=n=>o.editDialogVisible=n),title:"专利编辑",center:"",width:"50%"},{footer:a(()=>[P("span",q,[e(d,{onClick:i.Cancel},{default:a(()=>[y("取消")]),_:1},8,["onClick"]),e(d,{type:"primary",onClick:i.Save},{default:a(()=>[y(" 保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[e(S,{model:o.editedPat,"label-width":"100px"},{default:a(()=>[e(m,{label:"编号"},{default:a(()=>[e(c,{modelValue:o.editedPat.id,"onUpdate:modelValue":t[2]||(t[2]=n=>o.editedPat.id=n),disabled:""},null,8,["modelValue"])]),_:1}),e(m,{label:"专利名称"},{default:a(()=>[e(c,{modelValue:o.editedPat.name,"onUpdate:modelValue":t[3]||(t[3]=n=>o.editedPat.name=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"发明人"},{default:a(()=>[e(c,{modelValue:o.editedPat.uesrId,"onUpdate:modelValue":t[4]||(t[4]=n=>o.editedPat.uesrId=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"专利类型"},{default:a(()=>[e(c,{modelValue:o.editedPat.type,"onUpdate:modelValue":t[5]||(t[5]=n=>o.editedPat.type=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"授权时间"},{default:a(()=>[e(c,{modelValue:o.editedPat.empowerTime,"onUpdate:modelValue":t[6]||(t[6]=n=>o.editedPat.empowerTime=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"佐证材料"},{default:a(()=>[e(c,{modelValue:o.editedPat.attachment,"onUpdate:modelValue":t[7]||(t[7]=n=>o.editedPat.attachment=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"地址"},{default:a(()=>[e(c,{modelValue:o.editedPat.address,"onUpdate:modelValue":t[8]||(t[8]=n=>o.editedPat.address=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"专利号"},{default:a(()=>[e(c,{modelValue:o.editedPat.patentNo,"onUpdate:modelValue":t[9]||(t[9]=n=>o.editedPat.patentNo=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])],64)}const Y=B(Q,[["render",H]]);export{Y as default};
