import{aj as f,_ as c,d as E,o as k,c as y,a as p,b as l,w as t,F as T,E as i,e as U,f as F,j as L,g as W,h as m,i as P,k as v,l as z}from"./index-cc83c9fb.js";import{E as N}from"./el-pagination-4a604fda.js";import{c as $}from"./cloneDeep-d03ca120.js";const j=e=>f.request({url:"api/course/page",method:"post",data:e}),q=e=>f.request({url:"api/course/add",method:"post",data:e}),B=e=>f.request({url:"api/course/delete",params:e}),A=e=>f.request({url:"api/course/edit",method:"post",data:e}),D=E({data(){return{input:"",Courses:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,Course:{courseNo:"",courseType:"",createTime:"",deleted:0,depart:"",description:"",id:0,major:"",name:"",nameEn:"",school:"",state:0,updateTime:""},formLabelWidth:80}},mounted(){this.getCoursesPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.Course=$(e)},getCoursesPage(e){j({current:e,size:6}).then(u=>{console.log(u);const b=u.data.page;this.Courses=b.records,this.page=b}).catch(u=>{console.log(u)})},currentchange(e){this.getCoursesPage(e),this.page.current=e},del(e){console.log(e),B({id:e}).then(u=>{if(u.success)this.getCoursesPage(this.page.current);else return console.log(u.msg),!1}).catch(u=>{})},toAdd(){this.dialogFormVisible=!0},save(){const e=this.Course;e.id==0?q(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getCoursesPage(this.page.current),i(o.msg);else return i(o.msg),!1}).catch(o=>{i("网络错误联系管理员")}):A(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getCoursesPage(this.page.current),i(o.msg);else return i(o.msg),!1}).catch(o=>{i("网络错误联系管理员")})}}}),I={class:"Courses"},M={class:"course-tools"},G={class:"dialog-footer"};function H(e,o,u,b,J,K){const n=U,s=P,h=F,g=N,d=L,r=v,C=z,V=W;return k(),y(T,null,[p("div",I,[p("div",M,[l(n,{type:"warning",onClick:e.toAdd},{default:t(()=>[m("添加")]),_:1},8,["onClick"])]),l(h,{data:e.Courses,style:{width:"100%"}},{default:t(()=>[l(s,{fixed:"",prop:"id",label:"#",width:"50"}),l(s,{prop:"courseNo",label:"课程编号"}),l(s,{prop:"courseType",label:"课程类型",width:"120"}),l(s,{prop:"createTime",label:"创建时间",width:"120"}),l(s,{prop:"depart",label:"学院",width:"120"}),l(s,{prop:"description",label:"课程描述",width:"120"}),l(s,{prop:"major",label:"专业",width:"120"}),l(s,{prop:"name",label:"课程名称",width:"120"}),l(s,{prop:"nameEn",label:"英文课程名称",width:"120"}),l(s,{prop:"school",label:"学校",width:"120"}),l(s,{prop:"state",label:"状态",width:"120"}),l(s,{prop:"updateTime",label:"更新时间",width:"120"}),l(s,{fixed:"right",label:"操作",width:"120"},{default:t(a=>[l(n,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(a.row)},{default:t(()=>[m("更新")]),_:2},1032,["onClick"]),l(n,{link:"",type:"primary",size:"small",onClick:w=>e.del(a.row.id)},{default:t(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(g,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[12]||(o[12]=a=>e.dialogFormVisible=a),title:"课程类型编辑"},{footer:t(()=>[p("span",G,[l(n,{onClick:o[11]||(o[11]=a=>e.dialogFormVisible=!1)},{default:t(()=>[m("Cancel")]),_:1}),l(n,{type:"primary",onClick:e.save},{default:t(()=>[m(" 保存 ")]),_:1},8,["onClick"])])]),default:t(()=>[l(C,{model:e.Course},{default:t(()=>[l(r,{label:"课程编号","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.courseNo,"onUpdate:modelValue":o[0]||(o[0]=a=>e.Course.courseNo=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"课程类型","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.courseType,"onUpdate:modelValue":o[1]||(o[1]=a=>e.Course.courseType=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"创建时间","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.createTime,"onUpdate:modelValue":o[2]||(o[2]=a=>e.Course.createTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"学院","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.depart,"onUpdate:modelValue":o[3]||(o[3]=a=>e.Course.depart=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"课程描述","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.description,"onUpdate:modelValue":o[4]||(o[4]=a=>e.Course.description=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"专业","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.major,"onUpdate:modelValue":o[5]||(o[5]=a=>e.Course.major=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"课程名称","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.name,"onUpdate:modelValue":o[6]||(o[6]=a=>e.Course.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"英语课程名称","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.nameEn,"onUpdate:modelValue":o[7]||(o[7]=a=>e.Course.nameEn=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"学校","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.school,"onUpdate:modelValue":o[8]||(o[8]=a=>e.Course.school=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"状态","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.state,"onUpdate:modelValue":o[9]||(o[9]=a=>e.Course.state=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"更新时间","label-width":e.formLabelWidth},{default:t(()=>[l(d,{modelValue:e.Course.school,"onUpdate:modelValue":o[10]||(o[10]=a=>e.Course.school=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),p("template",null,[l(d,{modelValue:e.input,"onUpdate:modelValue":o[13]||(o[13]=a=>e.input=a),placeholder:"Please input"},null,8,["modelValue"])])],64)}const S=c(D,[["render",H]]);export{S as default};
