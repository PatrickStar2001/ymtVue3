import{aj as p,_ as c,d as C,o as L,c as U,a as f,b as l,w as a,F as W,E as u,e as E,f as k,g as v,h as r,i as T,j as F,k as P,l as I}from"./index-cc83c9fb.js";import{E as z}from"./el-pagination-4a604fda.js";import{c as $}from"./cloneDeep-d03ca120.js";const A=e=>p.request({url:"api/community/add",method:"post",data:e}),D=e=>p.request({url:"api/community/delete",params:e}),q=e=>p.request({url:"api/community/edit",method:"post",data:e}),B=e=>p.request({url:"api/community/page",method:"post",data:e}),N=C({data(){return{communities:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,community:{address:"",charger:0,createTime:"",deleted:0,depart:0,description:"",email:"",id:0,logo:"",mobile:"",name:"",schoolId:0,status:0,teachers:"",type:0,updateTime:"",version:0,weixin:""},formLabelWidth:80}},mounted(){this.getCommunitiesPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.community=$(e)},getCommunitiesPage(e){B({current:e,size:2}).then(n=>{console.log(n);const b=n.data.page;this.communities=b.records,this.page=b}).catch(n=>{console.log(n)})},currentchange(e){this.getCommunitiesPage(e),this.page.current=e},del(e){console.log(e),D({id:e}).then(n=>{if(n.success)this.getCommunitiesPage(this.page.current),this.page.total%this.page.size==1?this.getAdCatesPage(this.page.current-1):this.getAdCatesPage(this.page.current);else return console.log(n.msg),!1}).catch(n=>{})},toAdd(){this.dialogFormVisible=!0,this.community={address:"",charger:0,createTime:"",deleted:0,depart:0,description:"",email:"",id:0,logo:"",mobile:"",name:"",schoolId:0,status:0,teachers:"",type:0,updateTime:"",version:0,weixin:""}},save(){const e=this.community;e.id==0?A(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getCommunitiesPage(this.page.current),u(o.msg);else return u(o.msg),!1}).catch(o=>{u("网络错误联系管理员")}):q(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getCommunitiesPage(this.page.current),u(o.msg);else return u(o.msg),!1}).catch(o=>{u("网络错误联系管理员")})}}}),j={class:"communities"},M={class:"community-tools"},S={class:"dialog-footer"};function G(e,o,n,b,H,J){const s=E,i=T,h=k,g=z,m=F,d=P,V=I,y=v;return L(),U(W,null,[f("div",j,[f("div",M,[l(s,{type:"warning",onClick:e.toAdd},{default:a(()=>[r("添加")]),_:1},8,["onClick"])]),l(h,{data:e.communities,style:{width:"100%"}},{default:a(()=>[l(i,{fixed:"",prop:"id",label:"#",width:"50"}),l(i,{prop:"address",label:"团社地址"}),l(i,{prop:"charger",label:"团社会长"}),l(i,{prop:"createTime",label:"创建时间"}),l(i,{prop:"deleted",label:"逻辑删除"}),l(i,{prop:"depart",label:"学院编号"}),l(i,{prop:"description",label:"团社介绍"}),l(i,{prop:"email",label:"团社邮箱"}),l(i,{prop:"logo",label:"团社logo"}),l(i,{prop:"mobile",label:"团社电话"}),l(i,{prop:"name",label:"团社名称"}),l(i,{prop:"schoolId",label:"#"}),l(i,{prop:"status",label:"状态"}),l(i,{prop:"teachers",label:"导师"}),l(i,{prop:"type",label:"团社类型"}),l(i,{prop:"updateTime",label:"更新时间"}),l(i,{prop:"version",label:"#"}),l(i,{prop:"weixin",label:"团社公众号"}),l(i,{fixed:"right",label:"操作",width:"120"},{default:a(t=>[l(s,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(t.row)},{default:a(()=>[r("更新")]),_:2},1032,["onClick"]),l(s,{link:"",type:"primary",size:"small",onClick:w=>e.del(t.row.id)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(g,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(y,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[19]||(o[19]=t=>e.dialogFormVisible=t),title:"广告类型编辑"},{footer:a(()=>[f("span",S,[l(s,{onClick:o[18]||(o[18]=t=>e.dialogFormVisible=!1)},{default:a(()=>[r("Cancel")]),_:1}),l(s,{type:"primary",onClick:e.save},{default:a(()=>[r(" 保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[l(V,{model:e.community},{default:a(()=>[l(d,{label:"团社地址","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.address,"onUpdate:modelValue":o[0]||(o[0]=t=>e.community.address=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社会长","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.charger,"onUpdate:modelValue":o[1]||(o[1]=t=>e.community.charger=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"创建时间","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.createTime,"onUpdate:modelValue":o[2]||(o[2]=t=>e.community.createTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"逻辑删除","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.deleted,"onUpdate:modelValue":o[3]||(o[3]=t=>e.community.deleted=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"学院编号","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.depart,"onUpdate:modelValue":o[4]||(o[4]=t=>e.community.depart=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社介绍","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.description,"onUpdate:modelValue":o[5]||(o[5]=t=>e.community.description=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社邮箱","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.email,"onUpdate:modelValue":o[6]||(o[6]=t=>e.community.email=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"ID","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.id,"onUpdate:modelValue":o[7]||(o[7]=t=>e.community.id=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社logo","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.logo,"onUpdate:modelValue":o[8]||(o[8]=t=>e.community.logo=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社电话","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.mobile,"onUpdate:modelValue":o[9]||(o[9]=t=>e.community.mobile=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社名称","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.name,"onUpdate:modelValue":o[10]||(o[10]=t=>e.community.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"SchoolID","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.schoolId,"onUpdate:modelValue":o[11]||(o[11]=t=>e.community.schoolId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"状态","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.status,"onUpdate:modelValue":o[12]||(o[12]=t=>e.community.status=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"导师","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.teachers,"onUpdate:modelValue":o[13]||(o[13]=t=>e.community.teachers=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"类型","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.type,"onUpdate:modelValue":o[14]||(o[14]=t=>e.community.type=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"更新时间","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.updateTime,"onUpdate:modelValue":o[15]||(o[15]=t=>e.community.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"version","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.version,"onUpdate:modelValue":o[16]||(o[16]=t=>e.community.version=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社公众号","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.community.weixin,"onUpdate:modelValue":o[17]||(o[17]=t=>e.community.weixin=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const R=c(N,[["render",G]]);export{R as default};
